<!DOCTYPE html>
<html lang="en" data-theme="forest">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reactive Currency Converter</title>
    <!-- DaisyUI -->
    <link href="assets/daisyui.css" rel="stylesheet" type="text/css" />
    <!-- Tailwind CSS -->
    <script src="assets/tailwindcss.js"></script>
    <!-- Alpine.js -->
    <script src="assets/alpine.js" defer></script>
    <!-- App Logic -->
    <script src="assets/app.js"></script>
</head>

<body class="bg-base-200 min-h-screen flex items-center justify-center font-sans" x-data="currencyConverter()">

    <div class="card w-96 bg-base-100 shadow-xl">
        <div class="card-body">
            <div class="flex justify-between items-center mb-4">
                <h2 class="card-title text-primary text-2xl" x-text="config.cardTitle"></h2>

                <!-- Theme Controller -->
                <div class="dropdown dropdown-end">
                    <div tabindex="0" role="button"
                        class="input input-sm input-bordered flex items-center justify-between m-1 w-32 cursor-pointer">
                        <span x-text="currentTheme.charAt(0).toUpperCase() + currentTheme.slice(1)"></span>
                        <span>▼</span>
                    </div>
                    <ul tabindex="0" class="dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-52">
                        <template x-for="theme in config.themes" :key="theme">
                            <li><a @click="currentTheme = theme; document.activeElement.blur()"
                                    x-text="theme.charAt(0).toUpperCase() + theme.slice(1)"
                                    :class="{ 'active': currentTheme === theme }"></a></li>
                        </template>
                    </ul>
                </div>
            </div>

            <!-- Input Section: Row with 2/3 Amount and 1/3 Currency -->
            <div class="flex gap-2">
                <!-- Amount Input (2/3 width) -->
                <div class="form-control w-2/3">
                    <label class="label pt-0 pb-1 justify-start gap-1">
                        <span class="label-text text-xs" x-text="config.labels.amount"></span>
                        <span class="text-xs font-bold text-base-content/50" x-text="getSymbol(fromCurrency)"></span>
                    </label>
                    <div class="relative">
                        <input type="number" step="any" x-model="amount"
                            class="input input-bordered w-full px-4 font-bold" placeholder="1.00">
                    </div>
                </div>

                <!-- Currency Select (1/3 width) -->
                <div class="form-control w-1/3">
                    <label class="label pt-0 pb-1">
                        <span class="label-text text-xs" x-text="config.labels.currency"></span>
                    </label>
                    <div class="dropdown w-full">
                        <div tabindex="0" role="button"
                            class="input input-bordered w-full px-4 flex items-center justify-between cursor-pointer font-bold">
                            <span x-text="fromCurrency"></span>
                            <span>▼</span>
                        </div>
                        <ul tabindex="0"
                            class="dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-full max-h-60 overflow-y-auto flex-nowrap block">
                            <template x-for="(rate, code) in rates" :key="code">
                                <li><a @click="fromCurrency = code; document.activeElement.blur()" x-text="code"
                                        :class="{ 'active': fromCurrency === code }"></a></li>
                            </template>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Conversion Table -->
            <div class="overflow-x-auto mt-4">
                <table class="table table-zebra w-full">
                    <tbody>
                        <template x-for="(rate, code) in rates" :key="code">
                            <tr x-show="code !== fromCurrency" class="hover border-base-200">
                                <td class="font-bold py-3 text-base-content/80">
                                    <span x-text="code"></span>
                                    <span class="text-xs font-normal opacity-70 ml-1" x-text="getSymbol(code)"></span>
                                </td>
                                <td class="text-right py-3 text-lg font-sans font-medium text-accent">
                                    <span x-text="convert(rate)"></span>
                                </td>
                            </tr>
                        </template>
                    </tbody>
                </table>
            </div>

            <p class="text-xs text-base-content/50 mt-4 text-center" x-text="config.labels.footer"></p>
        </div>
    </div>
</body>

</html>